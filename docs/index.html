<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Yang Liu" />


<title>Analysis of the impact of Land use/Land cover change on Land Surface Temperature in Austin, Texas</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 41px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h2 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h3 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h4 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h5 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h6 {
  padding-top: 46px;
  margin-top: -46px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R Data Science Final Project</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Analysis of the impact of Land use/Land cover change on Land Surface Temperature in Austin, Texas</h1>
<h3 class="subtitle">GE0 511 final project</h3>
<h4 class="author">Yang Liu</h4>

</div>


<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>Austin, the capital of Texas State and the seat of Travis County, is the fastest growing large city in the United States and the second most populous state capital after Phoenix, Arizona with a population of almost 1 million (2017). Since the 21st century, more and more high-tech companies have moved to Austin, which has greatly promoted the city’s development and construction. Austin gradually became known as “Silicon Hill”, echoing California’s Silicon Valley. Generally, urbanization transforms the natural land surfaces to modern land use and land cover such as buildings, roads and other impervious surfaces, making urban landscapes fragmented and complex and affecting the inhabitability of cities. The enormous changes with land use/land cover lead to the urban heat island (UHI). In this project, with the help of Landsat image data, the land surface temperature(LST) of Austin respectively for 2001 and 2016 could be retrieved in order to see how they changed in the past 15 years. Furthermore, through combining the LST results with Land use/Land cover(LULC) data of Austin for 2001 and 2016, the impact of Land use/Land cover change on LST in Austin would be analyzed at the pixel scale.</p>
</div>
<div id="study-area" class="section level1">
<h1>Study area</h1>
<p>The study area of this project is the entire region of Travis county, including the whole Austin city.</p>
</div>
<div id="data-and-methods" class="section level1">
<h1>Data and methods</h1>
<p>Three Landsat 7 ETM+ images acquired on July 18, 2000, July 21, 2001 and July 24, 2002 are used to calculate the land surface temperature(LST) of 2001, while other three Landsat 7 ETM+ images acquired on August 29, 2015, July 14, 2016 and August 18, 2017 are used to calculate the LST of 2016. Census tract data of Travis county in 2019 is used to restrict the boundry of study area. Land use/Land cover(LULC) data obtained in 2001 and 2016 are respectively used to extract the detailed LULC classes of 2001 and 2016. You can simply use these following codes to download the required data. (Note: You may be asked to log in your Google account when you run the “drive_download” function. Just follow the instruction and you will get the folder called “Data” in your working directory successfully.)</p>
<pre class="r"><code>library(googledrive)
drive_download(as_id(&quot;1ucJeNsCwoXBQErx-myIxYl9NCCNRbOpw&quot;), overwrite = TRUE)</code></pre>
<pre><code>## Using an auto-discovered, cached token.
## To suppress this message, modify your code or options to clearly consent to the use of a cached token.
## See gargle&#39;s &quot;Non-interactive auth&quot; vignette for more details:
## https://gargle.r-lib.org/articles/non-interactive-auth.html
## The googledrive package is using a cached token for yliusjz0918@gmail.com.</code></pre>
<pre class="r"><code>unzip(&quot;Data.zip&quot;, list = FALSE, overwrite = TRUE)
file.remove(&quot;Data.zip&quot;)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<div id="libraries" class="section level2">
<h2>Libraries</h2>
<pre class="r"><code>library(sf)
library(sp)
library(raster)
library(rasterVis)
library(mapview)
library(dplyr)
library(tidyverse)
library(knitr)</code></pre>
</div>
<div id="import-the-data" class="section level2">
<h2>Import the data</h2>
<pre class="r"><code># read the raw LULC data
LULC_2001 &lt;- raster(&quot;Data/LULC/NLCD_2001_Land_Cover_L48_20190424_y1KgWNOUQ2kZkgchVNlH.tiff&quot;)
LULC_2016 &lt;- raster(&quot;Data/LULC/NLCD_2016_Land_Cover_L48_20190424_y1KgWNOUQ2kZkgchVNlH.tiff&quot;)

# read the census tract data of Travis county
Texas_tract &lt;- st_read(&quot;Data/Census_Tract/tl_2019_48_tract.shp&quot;)</code></pre>
<pre><code>## Reading layer `tl_2019_48_tract&#39; from data source `/Users/liuyang/Desktop/GEO 511 R/2019-geo511-project-yliu282/Data/Census_Tract/tl_2019_48_tract.shp&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 5265 features and 12 fields
## geometry type:  POLYGON
## dimension:      XY
## bbox:           xmin: -106.6456 ymin: 25.83716 xmax: -93.50804 ymax: 36.5007
## epsg (SRID):    4269
## proj4string:    +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs</code></pre>
<pre class="r"><code>Travis_tract &lt;- Texas_tract %&gt;% filter(COUNTYFP == &quot;453&quot;)

# read the Landsat image data 
## 2000~2002
B3_00 &lt;- raster(&quot;Data/01/2000/B3.TIF&quot;)
B4_00 &lt;- raster(&quot;Data/01/2000/B4.TIF&quot;)
B6_00 &lt;- raster(&quot;Data/01/2000/B6.TIF&quot;)
B3_01 &lt;- raster(&quot;Data/01/2001/B3.TIF&quot;)
B4_01 &lt;- raster(&quot;Data/01/2001/B4.TIF&quot;)
B6_01 &lt;- raster(&quot;Data/01/2001/B6.TIF&quot;)
B3_02 &lt;- raster(&quot;Data/01/2002/B3.TIF&quot;)
B4_02 &lt;- raster(&quot;Data/01/2002/B4.TIF&quot;)
B6_02 &lt;- raster(&quot;Data/01/2002/B6.TIF&quot;)

## 2015~2017
B3_15 &lt;- raster(&quot;Data/16/2015/B3.tif&quot;)
B4_15 &lt;- raster(&quot;Data/16/2015/B4.tif&quot;)
B6_15 &lt;- raster(&quot;Data/16/2015/B6.tif&quot;)
B3_16 &lt;- raster(&quot;Data/16/2016/B3.tif&quot;)
B4_16 &lt;- raster(&quot;Data/16/2016/B4.tif&quot;)
B6_16 &lt;- raster(&quot;Data/16/2016/B6.tif&quot;)
B3_17 &lt;- raster(&quot;Data/16/2017/B3.tif&quot;)
B4_17 &lt;- raster(&quot;Data/16/2017/B4.tif&quot;)
B6_17 &lt;- raster(&quot;Data/16/2017/B6.tif&quot;)</code></pre>
</div>
<div id="data-preprocessing" class="section level2">
<h2>Data preprocessing</h2>
<pre class="r"><code># Transfrom the CRS of census tract data and LULC data to be same as Landsat image data.
crs_Landsat &lt;- crs(B3_00, asText = TRUE)
Travis_tract_crs &lt;- Travis_tract %&gt;% st_transform(crs = crs_Landsat)
LULC_2001_crs &lt;- projectRaster(LULC_2001, crs = crs_Landsat, method = &quot;ngb&quot;)
LULC_2016_crs &lt;- projectRaster(LULC_2016, crs = crs_Landsat, method = &quot;ngb&quot;)

# Crop the Landsat image data and LULC data based on the extent of Travis county.
clip &lt;- function(x){
  raster::crop(x, Travis_tract_crs)
}
LULC_2001_travis &lt;- clip(LULC_2001_crs) 
LULC_2016_travis &lt;- clip(LULC_2016_crs)

band_list_01 &lt;- c(B3_00, B4_00, B6_00, B3_01, B4_01, B6_01, B3_02, B4_02, B6_02)
n &lt;- 0
for (band in band_list_01){
  n &lt;- n + 1
  band_list_01[[n]] &lt;- clip(band)
}

band_list_16 &lt;- c(B3_15, B4_15, B6_15, B3_16, B4_16, B6_16, B3_17, B4_17, B6_17)
k &lt;- 0
for (band in band_list_16){
  k &lt;- k + 1
  band_list_16[[k]] &lt;- clip(band)
}</code></pre>
</div>
<div id="land-surface-temperaturelst-calculation" class="section level2">
<h2>Land surface temperature(LST) calculation</h2>
<pre class="r"><code># Define the calculation function  for Landsat 7 ETM+.
calc_lst &lt;- function(b3, b4, b6){
  L &lt;- 0.067087*b6 - 0.06709
  Tb &lt;- 1282.71/log(666.09/L + 1)
  ndvi &lt;- (b4-b3)/(b4+b3)
  fv &lt;- ((ndvi-0.05)/0.65)^2
  ratio &lt;- 0.985*fv + 0.96*(1-fv) + 0.06*fv*(1-fv)
  Ts &lt;- Tb/(1 + (0.000011335*Tb/0.0144)*log(ratio))
  Tc &lt;- Ts - 273.15
}

# Calculate the average LST for 2001 and 2016 respectively based on the images of three years.
lst_00 &lt;- calc_lst(band_list_01[[1]], band_list_01[[2]], band_list_01[[3]])
lst_01 &lt;- calc_lst(band_list_01[[4]], band_list_01[[5]], band_list_01[[6]])
lst_02 &lt;- calc_lst(band_list_01[[7]], band_list_01[[8]], band_list_01[[9]])
lst_2001 &lt;- mean(lst_00, lst_01, lst_02, na.rm = TRUE)

lst_15 &lt;- calc_lst(band_list_16[[1]], band_list_16[[2]], band_list_16[[3]])
lst_16 &lt;- calc_lst(band_list_16[[4]], band_list_16[[5]], band_list_16[[6]])
lst_17 &lt;- calc_lst(band_list_16[[7]], band_list_16[[8]], band_list_16[[9]])
lst_2016 &lt;- mean(lst_15, lst_16, lst_17, na.rm = TRUE)</code></pre>
</div>
<div id="tidy-the-lulc-data-and-link-it-to-the-lst-results." class="section level2">
<h2>Tidy the LULC data and link it to the LST results.</h2>
<pre class="r"><code>Land_Cover_Type = c(
  &#39;Water&#39; = 11,
  &#39;Water&#39; = 12,
  &#39;Urban &amp; built-up&#39; = 21,
  &#39;Urban &amp; built-up&#39; = 22,
  &#39;Urban &amp; built-up&#39; = 23,
  &#39;Urban &amp; built-up&#39; = 24,
  &#39;Barren Land&#39; = 31,
  &#39;Forest&#39; = 41,
  &#39;Forest&#39; = 42,
  &#39;Forest&#39; = 43,
  &#39;Shrubland &amp; Grassland&#39; = 51,
  &#39;Shrubland &amp; Grassland&#39; = 52,
  &#39;Shrubland &amp; Grassland&#39; = 71,
  &#39;Shrubland &amp; Grassland&#39; = 72,
  &#39;Shrubland &amp; Grassland&#39; = 73,
  &#39;Shrubland &amp; Grassland&#39; = 74,
  &#39;Farmland&#39; = 81,
  &#39;Farmland&#39; = 82,
  &#39;Wetland&#39; = 90,
  &#39;Wetland&#39; = 95)

lcd = data.frame(
  ID = Land_Cover_Type,
  landcover = names(Land_Cover_Type),
  stringsAsFactors = F)

LULC_2001_travis = as.factor(LULC_2001_travis)
levels(LULC_2001_travis) = left_join(levels(LULC_2001_travis)[[1]], lcd)
LULC_2016_travis = as.factor(LULC_2016_travis)
levels(LULC_2016_travis) = left_join(levels(LULC_2016_travis)[[1]], lcd)

LULC_2001_travis_resample &lt;- resample(LULC_2001_travis, lst_2001, method = &quot;ngb&quot;)
lcds_01 = cbind.data.frame(
  values(lst_2001),
  ID=values(LULC_2001_travis_resample[[1]])) %&gt;%
  left_join(lcd, by = &quot;ID&quot;)

LULC_2016_travis_resample &lt;- resample(LULC_2016_travis, lst_2016, method = &quot;ngb&quot;)
lcds_16 = cbind.data.frame(
  values(lst_2016),
  ID=values(LULC_2016_travis_resample[[1]])) %&gt;% 
  left_join(lcd, by = &quot;ID&quot;)

lcds = cbind(lcds_01, lcds_16) %&gt;% na.omit()
names(lcds) &lt;- c(&quot;LST_2001&quot;, &quot;lcID_01&quot;, &quot;lcType_01&quot;, &quot;LST_2016&quot;, &quot;lcID_16&quot;, &quot;lcType_16&quot;)</code></pre>
</div>
</div>
<div id="results" class="section level1">
<h1>Results</h1>
<div id="the-lst-of-austin-in-2001-and-2016-are-shown-below" class="section level2">
<h2>The LST of Austin in 2001 and 2016 are shown below:</h2>
<div id="section" class="section level3">
<h3>2001</h3>
<pre class="r"><code>gplot(lst_2001) +
  geom_raster(aes(fill = value)) +
  scale_fill_gradientn(colors = c(&quot;blue&quot;, &quot;grey&quot;, &quot;red&quot;),
                       name = &quot;LST(C)&quot;) +
  coord_equal() +
  theme(legend.position = &quot;right&quot;) +
  labs(title = &quot;Land Surface Temperature of Austin in 2001&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-7-1.png" width="672" /> ### 2016</p>
<pre class="r"><code>gplot(lst_2016) +
  geom_raster(aes(fill = value)) +
  scale_fill_gradientn(colors = c(&quot;blue&quot;, &quot;grey&quot;, &quot;red&quot;),
                       name = &quot;LST(C)&quot;) +
  coord_equal() +
  theme(legend.position = &quot;right&quot;) +
  labs(title = &quot;Land Surface Temperature of Austin in 2016&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
</div>
<div id="the-lst-change-between-2001-and-2016-is-shown-below" class="section level2">
<h2>The LST change between 2001 and 2016 is shown below:</h2>
<pre class="r"><code>lst_diff &lt;- lst_2016 - lst_2001
gplot(lst_diff) +
  geom_raster(aes(fill = value)) +
  scale_fill_gradient2(low = &quot;blue&quot;, high = &quot;red&quot;, midpoint = 0,
                       name = &quot;LST Difference(C)&quot;) +
  coord_equal() +
  theme(legend.position = &quot;right&quot;) +
  labs(title = &quot;Land Surface Temperature change of Austin between 2001 and 2016&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
</div>
<div id="conclusions" class="section level1">
<h1>Conclusions</h1>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<p>[1]Alberti M, Marzluff J. Ecological resilience in urban ecosystems: linking urban patterns to ecological and human function. Urban Ecosyst2004;7:241-265 [2]Ackerman B.Temporal march of the Chicago heat island. Journal of Climate Applied Meteorology1985;24:547-554. [3]Artis D.A., Carnahan W.H. Survey of emissivity variability in thermography of urban areas. Remote Sensing of Environment1982;12:313-329 [4]Sobrino J.A.,Raissouni N., Li Z.L.A comparative study of land surface emissivity retrieval from NOAA data. Remote Sensing of Environment2001;75:256-266 [5]Valor E. and Caselles V.Mapping land surface emissivity from NDVI: Application to European, African, and South American areas. Remote Sensing of Environment1996;57:167-184</p>
</div>

<!-- give the footer some space -->
<br/>
<br/>

<footer id="site-footer">
  <div id="footer1">
  This website is a project for Adam Wilson's <a href="https://wilsonlab.io/GEO511"><i> Spatial Data Science (GEO511) </i></a>Course at the University at Buffalo
  </div>
  <div id="footer2">
  <a rel="license" property="http://creativecommons.org/ns#license"
  href="http://creativecommons.org/licenses/by/4.0/" ><img src="img/cc-by.svg" alt="cc-by"/></a> 
  </div>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>


</body>
</html>
